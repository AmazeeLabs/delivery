services:
  delivery.service:
    class: Drupal\delivery\DeliveryService
    arguments:
    - '@entity_type.manager'
    - '@workspaces.manager'
    - '@entity.repository'
    - '@conflict.resolver.manager'
    - '@workspaces.association'

  delivery.conflict_resolver_ui_sections:
    class: Drupal\delivery\ConflictResolverUI\ConflictResolverUISections
    arguments: ['@entity_type.manager', '@entity.form_builder']
    tags:
      - { name: conflict_resolver_ui, priority: 1 }

  delivery.route_subscriber:
    class: Drupal\delivery\Routing\RouteSubscriber
    tags:
    - { name: event_subscriber }

  conflict_resolution.merge_invisible_fields:
    class: Drupal\delivery\ConflictResolution\MergeInvisibleProperties
    tags:
      - { name: event_subscriber }

  conflict_resolution.merge_blacklisted_fields:
    class: Drupal\delivery\ConflictResolution\MergeBlacklistedFields
    tags:
      - { name: event_subscriber }

  conflict_discovery.blacklisted:
    class: Drupal\delivery\ConflictDiscovery\BlacklistedFieldsDiscovery
    tags:
      - { name: event_subscriber }

  Drupal\workspaces\EntityOperations:
    class: Drupal\delivery\DeliveryEntityOperations
    arguments:
      - '@entity_type.manager'
      - '@workspaces.manager'
      - '@workspaces.association'

  delivery.filtered_language_manager:
    class: Drupal\delivery\FilteredLanguageManager
    arguments: ['@language.default', '@config.factory', '@module_handler', '@language.config_factory_override', '@request_stack']

  delivery.content_translation.route_subscriber:
    class: Drupal\delivery\Routing\DeliveryContentTranslationRouteSubscriber
    arguments: ['@content_translation.manager']
    tags:
      - { name: event_subscriber }
