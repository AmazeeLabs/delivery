services:
  delivery.service:
    class: Drupal\delivery\DeliveryService
    arguments: ['@entity_type.manager', '@workspaces.manager', '@entity.repository', '@conflict.resolver.manager']

  delivery.conflict_resolver_ui_sections:
    class: Drupal\delivery\ConflictResolverUI\ConflictResolverUISections
    arguments: ['@entity_type.manager', '@entity.form_builder']
    tags:
      - { name: conflict_resolver_ui, priority: 1 }

  delivery.route_subscriber:
    class: Drupal\delivery\Routing\RouteSubscriber
    tags:
    - { name: event_subscriber }

  delivery.revision_index:
    class: Drupal\delivery\RevisionIndex
    arguments: ['@entity_type.manager', '@workspaces.manager']

  conflict_resolution.merge_invisible_fields:
    class: Drupal\delivery\ConflictResolution\MergeInvisibleProperties
    tags:
      - { name: event_subscriber }

  conflict_resolution.merge_blacklisted_fields:
    class: Drupal\delivery\ConflictResolution\MergeBlacklistedFields
    tags:
      - { name: event_subscriber }

  # Conflict discovery subscribers:
  conflict_discovery.blacklisted:
    class: \Drupal\delivery\ConflictDiscovery\BlacklistedFieldsDiscovery
    tags:
      - { name: event_subscriber }

#  delivery.language_manager:
#    class: Drupal\delivery\Language\DeliveryLanguageManager
#    public: false
#    decorates: language_manager
#    decoration_priority: 3
#    arguments: ['@language.default', '@config.factory', '@module_handler', '@language.config_factory_override', '@request_stack']

